# nushell

config file at: ~/.config/nushell/config.nu

## Config requirements

Must add: 

```
blz --porcelain-generate-nu-source
source ~/.config/blaze-keys/.leader_keys.nu
$env.BLZ_SHELL = "nu"
$env.BLZ_LEADER_STATE = (blz --porcelain-print-leader-state)
$env.config.hooks.pre_execution = $env.config.hooks.pre_execution | append { ||
  if ((commandline) | str contains "source") {} else {
    blz --porcelain-check-leader-state-then-exit
  }
}
```

## leader keys

A leader trigger looks like:

$env.config.keybindings ++= [
    {
      name: test_it
      modifier: control
      keycode: char_t
      mode: emacs
      event: {
        send: executehostcommand,
        cmd: "blz --porcelain-leader Leader1 --porcelain-tmp /tmp/tehunoei; commandline edit -A --insert (cat /tmp/tehunoei)"
      }
    }
]

## top level keybinds

Will need to register a env_change hook:

$env.config.hooks = {
    env_change: {
        PWD: [{|before, after| '$env.test = (blz -B)' }]
    }
}

How do I make that update the $env in the current session? It seems like the env changes are scoped to the hook. 


### Refactoring command args

--porcelain-leader 
--porcelain-ignore-leader-state
--porcelain-print-leader-state
--porcelain-check-leader-state-then-exit
--porcelain-generate-nu-source
--porcelain-print-nu-source-path
--porcelain-tmp <PORCELAIN_TMP>
--porcelain-abbr
--porcelain-blat

Now under porcelain:

  leader-key
  print-leader-state
  check-leader-state-then-exit
  generate-nu-source
  print-nu-source-path
  blat

